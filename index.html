<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div style="background-color: rgba(255,0,0,1);"> <!-- filter: blur(10px);  -->
				<header style="position: absolute;top: 50px; left: 100px; z-index:500; font-size:100px;"></header>
			</div>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2><b>Interoperability</b><br/>
					between <nobr>classic infrastructure</nobr>
					and <b>Libre-Mesh</b> networks
					<nobr>in <b>Guifi.net</b></nobr></h2>
				</section>

				<section>
					<section>
						<h1>Guifi.net</h1>
						<p>Con i suoi circa 30000 nodi attivi, sparsi per la penisola Iberica, collegati tra loro, soprattutto con link WiFi o in fibra ottica, è la rete comunitaria più grande del mondo.</p>
					</section>

					<section data-background="images/guifi-net-catalonia-background.png" data-background-transition="zoom">
						<h2><b>Catalogna</b><br/><br/><br/><br/><br/><br/><br/></h2>
					</section>

					<section data-background="images/guifi-net-iberia-background.png" data-background-transition="zoom">
						<h2><b>Penisola Iberica</b><br/><br/><br/><br/><br/><br/><br/></h2>
					</section>

					<section>
						<h1>Guifi.net</h1>
						<ul>
							<li>Comunitaria</li>
							<dd class="fragment"><small>Gli aspetti sociali, tecnici ed infrastrutturali<br/> sono di pari importanza.</small></dd>

							<li>Autogestita</li>
							<dd class="fragment"><small>I partecipanti possono costruire e controllare<br/>autonomamente i propri apparati.</small></dd>

							<li>Libera</li>
							<dd class="fragment"><small>La rete e gli accordi tra pari vengono costruiti a partire<br/>dal <b>garantire libertà</b> di base e non da divieti.</small></dd>

							<li>Aperta</li>
							<dd class="fragment"><small>Non ci sono restrizioni di accesso alla rete.<br/><b>Nessuna identificazione</b> richiesta.</small></dd>

							<li>Neutrale</li>
							<dd class="fragment"><small>I nodi non fanno discriminazioni sui pacchetti<br/>applicando una politica di forwarding best-effort.</small></dd>
						</ul>
					</section>

					<section>
						<h1>Guifi.net</h1>
						<p>Autogestione &times; Libertà = Autonomia</p>
						<p>&DoubleDownArrow;<br/>È vantaggioso favorire scelte tecniche variegate.</p>
						<p class="fragment">Tuttavia...</p>
						<p class="fragment">&DoubleDownArrow;<br/>Non è semplice garantirne l'interoperabilità.</p>
					</section>

					<section>
						<h1>Guifi.net</h1>
						<p>I nodi della <b>troncale</b> devono essere configurati <b>manualmente</b> <span class="fragment">usando BGP come protocollo di routing</span> <span class="fragment">e consultando le informazioni necessarie da una <nobr>base di dati <b>centralizzata</b>...</nobr></span></p>
						<h2 class="fragment">Contraddizioni?</h2>
						<small class="fragment">Si, la realtà tecnica non sempre è coerente con i principi fondanti.</small>
					</section>

					<section>
						<h1>Guifi.net</h1><h2>Contraddizioni?</h2>
						<ul>
							<li>Troncale &Implies; <s>Orizzontalità</s></li>
							<dd class="fragment"><small>Introduce una gerarchia tra <b>super</b>nodi &in; troncale e nodi &notin; troncale.<br/>Gli accordi <b>non</b> sono tutti paritari!</small></dd>

							<li>Centralizzata &Implies; <s>Autonomia</s></li>
							<dd class="fragment"><small>La dipendenza da una base di dati centrale<br/>inficia l'autonomia dei partecipanti.</small></dd>
						</ul>
						<p class="fragment">&DoubleDownArrow;<br/>Guifi.net non è perfetta...<br/><span class="fragment">Ma abbiamo un'utopia e sappiamo <i>camminare</i>.<br/><small><i>Leggasi:</i> rimboccarci le maniche e scrivere codice.</small></p>
					</section>
				</section>

				<section>
					<section>
						<h1>Libre-Mesh</h1>
						<p>Meta-firmware Free Software basato su OpenWrt/LEDE e sviluppato, in collaborazione, da reti comunitarie <nobr>di tutto il mondo.</nobr></p>
						<p class="fragment">Progettato per semplificare la creazione di reti comunitarie distribuite e paritarie.</p>
					</section>
					<section>
						<h2>Architettura di rete</h2>
						<ul>
							<li>Modulare</li>
							<dd class="fragment"><small>I servizi e i protocolli supportati ai diversi livelli di rete (es: anygw,<br/>dhcpdiscover, webui) sono opzionali ed hanno poche dipendenze.</small></dd>

							<li>Mesh</li>
							<dd class="fragment"><small>Ogni nodo cerca di collegarsi a tutti quelli che sono alla sua portata per creare un'infrastruttura ridondante e possibilmente robusta.</small></dd>

							<li>Autoconfigurabile</li>
							<dd class="fragment"><small>Ogni nodo contiene tutta l'informazione necessaria (pochi byte)<br/>affinché il software possa generare la configurazione localmente<br/>senza necessità di server centrali.</small></dd>

							<li>Adattabile</li>
							<dd class="fragment"><small>Il setup di rete può essere cambiato notevolmente, adattandosi<br/>ad esigenze anche molto diverse cambiando poche configurazioni.</small></dd>
						</ul>
					</section>
					<section data-background="images/lime_L1_L2_L3_300dpi.png" data-background-size="1010px">
						<!--<h2>Architettura&nbsp;&nbsp;&nbsp;<br/>di rete&nbsp;&nbsp;&nbsp;<br/><br/><br/><br/></h2>-->
					</section>
					<section>
						<h2>Architettura software</h2>
						<ul>
							<li>Leggera</li>
							<dd class="fragment"><small>Ha esigenze di spazio ridotte a pochi kilobyte contando<br/>anche le dipendenze, anche grazie alla scelta di Lua<br/>come linguaggio di programmazione.</small></dd>

							<li>Modulare</li>
							<dd class="fragment"><small>Il software è diviso in piccoli moduli, opzionali e con poche<br/>dipendenze, abilitandone un insieme minimale si può ottenere<br/>un firmware completo che occupi meno di 4MB.</small></dd>

							<li>Estensibile</li>
							<dd class="fragment"><small>Moduli aggiuntivi possono essere facilmente creati,<br/>implementando le callback richiamate dal core.</small></dd>
						</ul>
					</section>
					<section>
						<h1>Libre-Mesh</h1>
						<h2>Molto bello ma...</h2>
						<p class="fragment">Non supportava BGP</p>
						<p class="fragment">&DoubleDownArrow;<br/>Non era interoperabile con la troncale di Guifi.net</p>
						<small class="fragment">Ma sappiamo <i>camminare</i></small>
					</section>
				</section>

				<section>
					<section>
						<h2>lime-proto-bgp</h2>
						<p>È un nuovo modulo opzionale per Libre-Mesh, creato per supportare il protocollo di routing BGP, a tale scopo, usa come backend il demone di routing BIRD.</p>
						<small class="fragment">Perché proprio BIRD e non Quagga?</small>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<p>BIRD vs Quagga</p>
						<ul>
							<li>Affidabilità</li>
							<dd class="fragment"><small>Se usato in combinazione con altri demoni di routing<br/>Quagga è tristemente noto per i suoi crash.<br/>BIRD non ha manifestato nessuno di questi problemi.</small></dd>
							
							<li>Leggerezza</li>
							<dd class="fragment"><small>Quagga è noto per l'uso eccessivo di RAM, in cambio<br/>BIRD viene usato come sostituto di Quagga in molti<br/>Internet Exchange per le sue ottime performances.</small></dd>
							
							<li>Mantenibilità</li>
							<dd class="fragment"><small>La comunità di sviluppatori di Quagga è stata spesso<br/>insensibile alle necessità delle reti comunitarie ignorando anche<br/>patch e migliorie proposte in passato (es: source-routing).<br/>La comunità di BIRD è stata molto disponibile ed<br/>ha appoggiato questo progetto.</small></dd>
						</ul>
						<p class="fragment">3 - 0<p>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<p>Oltre a configurare BIRD estende l'API <span style="font-family: monospace;">proto</span> di Libre-Mesh per facilitare lo scambio di rotte tra protocolli diversi. In questo modo i protocolli possono aggiungere configurazioni specifiche per BGP attraverso la nuova callback <span style="font-family: monospace;">proto.bgp_conf(t4,t6)</span>.</p>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<h3>Loop</h3>
						<p><b>e</b>BGP con apprendimento di rotte </p>
						<p><b>&cap;</b><br/>N&gt;1 punti di scambio di rotte.</p>
						<p class="fragment">&DoubleDownArrow;<br/>Routing loop.</p>
						<p class="fragment">&DoubleDownArrow;<br/>I pacchetti <i>muoiono</i>.</p>
						<p class="fragment">&DoubleDownArrow;<br/>La rete <b>non</b> funziona.</p>
					</section>

					<section data-background="images/multiple_exchanges_ebgp_loop_820px.png" data-background-repeat="false" data-background-size="820px">
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<h3>Loop avoidance</h3>
						<p><b>i</b>BGP con apprendimento di rotte </p>
						<p><b>&cap;</b><br/>N&gt;1 punti di scambio di rotte.</p>
						<p>&DoubleDownArrow;<br/>La rete funziona<span class="fragment">, ma...</span></p>
						<p class="fragment">Bisogna configurare N² peerings.<br/>&DoubleDownArrow;<br/>Insostenibile per una rete autogestita.</p>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<h3>Loop avoidance</h3>
						<p>Perché iBGP funziona mentre eBGP no?</p>
						<ul>
							<li>Rotta &rightarrow; eBGP &rightarrow; kernel</li>
							<dd class="fragment"><small>Nel setup eBGP tutti i router hanno AS diversi, quando arriva un nuovo annuncio la rotta viene inserita nella tabella di instradamento del kernel. Nel caso in cui la rotta fosse di origine interna viene creato un loop.</small></dd>
							
							<li>Rotta &rightarrow; iBGP &rightarrow; orig_AS &NotEqual; mio_AS ? kernel : scarto</li>
							<dd class="fragment"><small>Nel setup iBGP  tutti i router della stessa zona condividono il numero di AS, in questo modo quando le rotte della stessa zona vengono propagate da router esterni restano riconoscibili. Se arriva un annuncio di una rotta interna questa viene scartata invece di essere riaggiunta alla tabella di instradamento del kernel, in questo modo il traffico diretto verso l'interno non viene mai dirottato all'esterno, evitando il loop.</small></dd>
						</ul>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<h3>Loop avoidance</h3>

						<p>Possiamo evitare i loop senza configurare N² peerings?</li>
						<small class="fragment">iBGP ha bisogno di N² peerings per mantenere le tabelle di routing dei router consistenti.</small>

						<div class="fragment" style="text-align: left;">
						<p>Possiamo fare di meglio per garantire la consistenza?</p>
						<small>Il protocollo di routing BMX6 già presente in Libre-Mesh collateralmente al suo normale funzionamento risolve questo problema senza necessità di configurazioni aggiuntive.</small>
						</div>

						<p class="fragment">BGP &times; AS condiviso &times; BMX6</p>
						<p class="fragment">&DoubleDownArrow;<br/> Loop avoidance senza peerings aggiuntivi.</p>
					</section>
					
					<section data-background="images/performance_testbed_820px.png" data-background-repeat="false" data-background-size="820px"></section>

					<section>
						<h2>lime-proto-bgp</h2>
						<h3>Performances</h3>
						<p>Siamo riusciti nel nostro intento, ma con che impatto sulle performances dei routers?</p>
					</section>

					<section data-background="images/routes_load_memory+0:1:896_820px.png" data-background-repeat="false" data-background-size="820px">
						<h2>lime-proto-bgp</h2>
						<br/><br/><br/><br/><br/><br/><br/><br/><br/>
					</section>

					<section>
						<h2>lime-proto-bgp</h2>
						<ul>
							<li>Il load di sistema</li>
							<dd class="fragment"><small>Decisamente troppo alto.<br/>I nodi di intercambio sono in continuo sovraccarico.</small></dd>

							<li>Quali sono le cause?</li>
							<dd class="fragment"><small>Da un'approfondita analisi sono emersi alcuni bug di BMX6 ed<br/>alcune configurazioni di default non adatte a questa situazione.</small></dd>

							<li>Ottimizzazione</li>
							<dd class="fragment"><small>Risolti i bug e raffinate le configurazioni il setup è perfettamente<br/>usabile ed ha buone performances.</small></dd>
						</ul>
					</section>

					<section data-background="images/routes_load_memory+128:0:0_820px.png" data-background-repeat="false" data-background-size="820px">
						<h2>lime-proto-bgp</h2>
						<br/><br/><br/><br/><br/><br/><br/><br/><br/>
					</section>

				</section>

				<section>
					<h1>Futuribile</h1>
					<p>Il software sviluppato permette di costruire reti zone e troncali di Guifi.net con Libre-Mesh risolvendo alcune contraddizioni tra i principi fondanti e la realtà tecnica.</p>
					<p>L'indipindenza da strutture centralizzate, la maggiore autonomia e l'autoconfigurabilità aumentano la crescita sostenibile di Guifi.net aprendo nuovi orizzonti di espansione sociale e territoriale.</p>
					<p>L'uso di software libero previene i vendor lock-in e riduce i costi di eventuali necessari sviluppi futuri.</p>
				</section>

				<section>
					<h1><s>Fine</s></h1>
					<p>Grazie alle sensibilità che mi attraversano.</p>
					<p>Riconoscimento a quelle che mi ispirano.</p>
					<p>Lustro a quelle che insieme a me cospirano.</p>
					<br/><br/>
					<small>Copyright  &copy; 2015 Gioacchino Mazzurco.</small>
					<br/>
					<a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="images/CC-by-sa.png" style="background:none; border:none; box-shadow:none;"/></a>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
